FROM node:12.19.0-alpine

RUN mkdir -p /usr/app/dist/
COPY ./dist /usr/app/dist
COPY ./index.js /usr/app/index.js
COPY ./package.json /usr/app/package.json
RUN npm config set registry https://registry.npm.taobao.org
RUN  cd /usr/app/ && npm install --production
WORKDIR /usr/app

ENV HOST 0.0.0.0
ENV PORT 80
EXPOSE 80
ENTRYPOINT ["npm","run","prod"]
